(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,53276,e=>{"use strict";var t=e.i(43476),r=e.i(46932);function a({children:e,className:a="",...s}){return(0,t.jsx)(r.motion.div,{initial:{opacity:0,y:8,scale:.995},whileInView:{opacity:1,y:0,scale:1},whileHover:{y:-4},whileTap:{scale:.995},viewport:{once:!0,amount:.15},transition:{type:"spring",stiffness:260,damping:22},className:`card ${a}`,...s,children:e})}e.s(["default",()=>a])},51720,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(66427),s=e.i(5766),i=e.i(92199),l=e.i(53276);function n(){let[e,n]=(0,r.useState)(!1),[o,d]=(0,r.useState)([]),[c,g]=(0,r.useState)([]);return((0,r.useEffect)(()=>{n(!0)},[]),(0,r.useEffect)(()=>{e&&(async()=>{try{let e=await fetch("/api/trades",{headers:{"x-user-id":"demo-user"}});if(!e.ok){let t=null;try{t=await e.json()}catch(r){t=await e.text()}console.error("Failed to fetch trades:",e.status,t),d([]);return}let t=await e.json();if(!Array.isArray(t)){console.warn("Unexpected trades payload in insights page",t),d([]);return}d(t)}catch(e){console.error("Error fetching trades:",e)}})()},[e]),(0,r.useEffect)(()=>{if(0===o.length)return;let e=[],t={};o.forEach(e=>{t[e.pair]||(t[e.pair]={wins:0,losses:0,pnl:0}),"WIN"===e.outcome&&t[e.pair].wins++,"LOSS"===e.outcome&&t[e.pair].losses++,t[e.pair].pnl+=e.profitLoss||0});let r=Object.entries(t).sort((e,t)=>t[1].wins-e[1].wins)[0];r&&e.push({type:"strength",title:`${r[0]} is your best pair`,description:`You have a ${Math.round(r[1].wins/(r[1].wins+r[1].losses)*100)}% win rate on ${r[0]}. Consider trading it more often.`,icon:i.FiTrendingUp,color:"text-green-600 dark:text-green-400"});let a=o.filter(e=>e.emotionalState);if(a.length>0){let t={};a.forEach(e=>{t[e.emotionalState||""]||(t[e.emotionalState||""]={wins:0,losses:0}),"WIN"===e.outcome?t[e.emotionalState||""].wins++:t[e.emotionalState||""].losses++});let r=Object.entries(t).sort((e,t)=>t[1].wins-e[1].wins)[0];r&&e.push({type:"pattern",title:`You trade best when ${r[0]}`,description:`${r[1].wins} wins when ${r[0]} vs ${r[1].losses} losses. Remember this state for future trades.`,icon:i.FiZap,color:"text-blue-600 dark:text-blue-400"})}let s=o.filter(e=>"LONG"===e.direction),l=o.filter(e=>"SHORT"===e.direction),n=s.length>0?s.filter(e=>"WIN"===e.outcome).length/s.length*100:0,d=l.length>0?l.filter(e=>"WIN"===e.outcome).length/l.length*100:0;n>d&&n>40&&e.push({type:"improvement",title:"You are better at LONG trades",description:`Long win rate: ${Math.round(n)}% vs Short: ${Math.round(d)}%. Focus more on long setups.`,icon:i.FiTarget,color:"text-green-600 dark:text-green-400"});let c=o.filter(e=>e.mistakes).flatMap(e=>{try{return e.mistakes?JSON.parse(e.mistakes):[]}catch{return[]}});if(c.length>0){let t={};c.forEach(e=>{t[e]=(t[e]||0)+1});let r=Object.entries(t).sort((e,t)=>t[1]-e[1])[0];r&&r[1]>1&&e.push({type:"warning",title:`Repeated mistake: ${r[0]}`,description:`You've made this mistake ${r[1]} times. Create a checklist to prevent this.`,icon:i.FiAlertCircle,color:"text-orange-600 dark:text-orange-400"})}let h=o.filter(e=>{let t=new Date(e.entryTime).getHours();return t>=8&&t<12});if(h.length>5){let t=h.filter(e=>"WIN"===e.outcome).length/h.length*100;t>60&&e.push({type:"pattern",title:"You trade best in the morning",description:`Morning (8am-12pm) win rate: ${Math.round(t)}%. Schedule more trades during this time.`,icon:i.FiTrendingUp,color:"text-yellow-600 dark:text-yellow-400"})}g(e)},[o]),e)?(0,t.jsxs)("div",{className:"min-h-screen bg-white dark:bg-slate-950",children:[(0,t.jsx)(a.default,{}),(0,t.jsxs)("main",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"AI-Powered Insights"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Get personalized trading improvements based on your data"})]}),c.length>0?(0,t.jsx)("div",{className:"space-y-4",children:c.map((e,r)=>{let a=e.icon,s="warning"===e.type?"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-700":"strength"===e.type?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-700":"improvement"===e.type?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700":"bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-700";return(0,t.jsx)(l.default,{className:`${s} border p-6`,children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:`p-3 rounded-lg ${e.color} bg-white dark:bg-slate-800`,children:(0,t.jsx)(a,{className:"w-6 h-6"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1",children:e.title}),(0,t.jsx)("p",{className:"text-gray-700 dark:text-gray-300",children:e.description})]})]})},r)})}):(0,t.jsxs)(l.default,{className:"bg-white dark:bg-slate-800 p-12 text-center border border-gray-200 dark:border-slate-700",children:[(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"Add more trades to get AI-powered insights"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"The more data you have, the better insights we can provide"})]}),o.length>0&&(0,t.jsxs)(l.default,{className:"mt-8 bg-white dark:bg-slate-800 p-6 border border-gray-200 dark:border-slate-700",children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"This Week's Summary"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"bg-gray-50 dark:bg-slate-700 p-4 rounded-lg",children:[(0,t.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Total Trades"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:o.length})]}),(0,t.jsxs)("div",{className:"bg-gray-50 dark:bg-slate-700 p-4 rounded-lg",children:[(0,t.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Win Rate"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[o.length>0?Math.round(o.filter(e=>"WIN"===e.outcome).length/o.length*100):0,"%"]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 dark:bg-slate-700 p-4 rounded-lg",children:[(0,t.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Total P&L"}),(0,t.jsx)("p",{className:`text-2xl font-bold ${o.reduce((e,t)=>e+(t.profitLoss||0),0)>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:(o.reduce((e,t)=>e+(t.profitLoss||0),0)||0).toFixed(2)})]}),(0,t.jsxs)("div",{className:"bg-gray-50 dark:bg-slate-700 p-4 rounded-lg",children:[(0,t.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Avg Quality"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:o.filter(e=>e.setupQuality).length>0?(o.filter(e=>e.setupQuality).reduce((e,t)=>e+(t.setupQuality||0),0)/o.filter(e=>e.setupQuality).length).toFixed(1):"N/A"})]})]})]})]}),(0,t.jsx)(s.Toaster,{position:"bottom-right"})]}):(0,t.jsx)("div",{className:"min-h-screen bg-white dark:bg-slate-950"})}e.s(["default",()=>n])}]);