(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,53276,e=>{"use strict";var t=e.i(43476),r=e.i(46932);function a({children:e,className:a="",...s}){return(0,t.jsx)(r.motion.div,{initial:{opacity:0,y:8,scale:.995},whileInView:{opacity:1,y:0,scale:1},whileHover:{y:-4},whileTap:{scale:.995},viewport:{once:!0,amount:.15},transition:{type:"spring",stiffness:260,damping:22},className:`card ${a}`,...s,children:e})}e.s(["default",()=>a])},3510,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(66427),s=e.i(5766),d=e.i(53276);function l(){let[e,l]=(0,r.useState)(!1),[n,i]=(0,r.useState)([]),[o,c]=(0,r.useState)(new Date),[g,x]=(0,r.useState)(null);(0,r.useEffect)(()=>{l(!0)},[]),(0,r.useEffect)(()=>{e&&(async()=>{try{let e=await fetch("/api/trades",{headers:{"x-user-id":"demo-user"}});if(!e.ok){let t=null;try{t=await e.json()}catch(r){t=await e.text()}console.error("Failed to fetch trades:",e.status,t),i([]);return}let t=await e.json();if(!Array.isArray(t)){console.warn("Unexpected trades payload in calendar page",t),i([]);return}i(t)}catch(e){console.error("Error fetching trades:",e)}})()},[e]);let b=(0,r.useMemo)(()=>{let e={};return n.forEach(t=>{let r=new Date(t.entryTime).toISOString().split("T")[0];e[r]||(e[r]=[]),e[r].push(t)}),e},[n]),m=Array.from({length:new Date(o.getFullYear(),o.getMonth()+1,0).getDate()},(e,t)=>t+1),h=[...Array.from({length:new Date(o.getFullYear(),o.getMonth(),1).getDay()},(e,t)=>null),...m],u=g&&b[g]||[];return e?(0,t.jsxs)("div",{className:"min-h-screen bg-white dark:bg-slate-950",children:[(0,t.jsx)(a.default,{}),(0,t.jsxs)("main",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Trading Calendar"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"View your trades by day"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)(d.default,{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-4 border border-gray-200 dark:border-slate-700",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:o.toLocaleString("default",{month:"long",year:"numeric"})}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>c(new Date(o.getFullYear(),o.getMonth()-1)),className:"btn-compact bg-gray-200 dark:bg-slate-700 hover:bg-gray-300 dark:hover:bg-slate-600 transition-colors rounded-md",children:"← Prev"}),(0,t.jsx)("button",{onClick:()=>c(new Date),className:"btn-compact bg-blue-600 hover:bg-blue-700 text-white transition-colors rounded-md",children:"Today"}),(0,t.jsx)("button",{onClick:()=>c(new Date(o.getFullYear(),o.getMonth()+1)),className:"btn-compact bg-gray-200 dark:bg-slate-700 hover:bg-gray-300 dark:hover:bg-slate-600 transition-colors rounded-md",children:"Next →"})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-7 gap-2 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,t.jsx)("div",{className:"text-center font-semibold text-gray-700 dark:text-gray-300 text-xs py-1",children:e},e))}),(0,t.jsx)("div",{className:"calendar-grid",children:h.map((e,r)=>{let a,s,d;if(null===e)return(0,t.jsx)("div",{className:"calendar-day"},`empty-${r}`);let l=new Date(o.getFullYear(),o.getMonth(),e).toISOString().split("T")[0],n=(s=(a=b[new Date(o.getFullYear(),o.getMonth(),e).toISOString().split("T")[0]]||[]).reduce((e,t)=>e+(t.profitLoss||0),0),d=a.filter(e=>"WIN"===e.outcome).length,{count:a.length,pnl:s,wins:d}),i=g===l;return(0,t.jsx)("button",{onClick:()=>x(i?null:l),className:`calendar-day rounded-lg border-2 transition-colors font-semibold ${i?"bg-blue-600 border-blue-600 text-white dark:bg-blue-700 dark:border-blue-700":n.count>0?n.pnl>=0?"bg-green-100 border-green-300 dark:bg-green-900/30 dark:border-green-700 text-green-900 dark:text-green-100":"bg-red-100 border-red-300 dark:bg-red-900/30 dark:border-red-700 text-red-900 dark:text-red-100":"bg-gray-100 border-gray-300 dark:bg-slate-700 dark:border-slate-600 text-gray-600 dark:text-gray-400"}`,children:(0,t.jsxs)("div",{className:"w-full flex items-start justify-between",children:[(0,t.jsx)("div",{className:"text-sm font-semibold",children:e}),n.count>0&&(0,t.jsxs)("div",{className:"text-[11px]",children:[n.count,"T"]})]})},e)})}),(0,t.jsxs)("div",{className:"mt-6 flex flex-wrap gap-4 calendar-legend",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-green-100 dark:bg-green-900/30 rounded border-2 border-green-300 dark:border-green-700"}),(0,t.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"Winning Day"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-red-100 dark:bg-red-900/30 rounded border-2 border-red-300 dark:border-red-700"}),(0,t.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"Losing Day"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-gray-100 dark:bg-slate-700 rounded border-2 border-gray-300 dark:border-slate-600"}),(0,t.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"No Trades"})]})]})]}),(0,t.jsxs)(d.default,{className:"bg-white dark:bg-slate-800 p-4 border border-gray-200 dark:border-slate-700 h-fit",children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:g?new Date(g+"T00:00:00").toLocaleDateString():"Select a date"}),u.length>0?(0,t.jsx)("div",{className:"space-y-3",children:u.map(e=>(0,t.jsxs)("div",{className:"bg-gray-50 dark:bg-slate-700 p-3 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:e.pair}),(0,t.jsx)("span",{className:`text-xs font-semibold px-2 py-1 rounded ${"WIN"===e.outcome?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:e.outcome||"Open"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:e.direction}),(0,t.jsx)("span",{className:e.profitLoss&&e.profitLoss>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",children:void 0!==e.profitLoss?`${e.profitLoss>=0?"+":""}${e.profitLoss.toFixed(2)}`:"N/A"})]})]},e.id))}):(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:g?"No trades on this date":"Select a date to view trades"})]})]})]}),(0,t.jsx)(s.Toaster,{position:"bottom-right"})]}):(0,t.jsx)("div",{className:"min-h-screen bg-white dark:bg-slate-950"})}e.s(["default",()=>l])}]);