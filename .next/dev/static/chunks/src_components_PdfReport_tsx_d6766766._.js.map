{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/Forex-Journal/src/components/PdfReport.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { PDFDownloadLink, Page, Text, View, Document, StyleSheet, Image } from '@react-pdf/renderer';\r\n\r\nexport default function PdfReport({ trades, chartSelector }: { trades: any[]; chartSelector?: string }) {\r\n  const [chartDataUrl, setChartDataUrl] = useState<string | null>(null);\r\n\r\n  async function captureChart() {\r\n    if (!chartSelector) return null;\r\n    const el = document.querySelector(chartSelector) as HTMLElement | null;\r\n    if (!el) return null;\r\n    const svg = el.querySelector('svg') as SVGElement | null;\r\n    if (!svg) return null;\r\n    const s = new XMLSerializer().serializeToString(svg as any);\r\n    const data = 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(s);\r\n    return data;\r\n  }\r\n\r\n  const totalPnL = trades.reduce((s, t) => s + (t.profitLoss || 0), 0);\r\n  const wins = trades.filter(t => t.outcome === 'WIN').length;\r\n  const loss = trades.filter(t => t.outcome === 'LOSS').length;\r\n\r\n  const MyDoc = (\r\n    <Document>\r\n      <Page size=\"A4\" style={styles.page}>\r\n        <View>\r\n          <Text style={styles.title}>Trading Report</Text>\r\n          <Text style={styles.subtitle}>Total Trades: {trades.length}</Text>\r\n          <Text>Total P&L: {totalPnL.toFixed(2)}</Text>\r\n          <Text>Wins: {wins} Losses: {loss}</Text>\r\n          {chartDataUrl && <Image style={styles.image} src={chartDataUrl} />}\r\n        </View>\r\n      </Page>\r\n    </Document>\r\n  );\r\n\r\n  return (\r\n    <div className=\"flex items-center gap-2\">\r\n      <button aria-label=\"Capture chart for PDF\" className=\"btn-gradient px-3 py-2 rounded text-sm\" onClick={async () => { const data = await captureChart(); if (data) setChartDataUrl(data); else alert('No SVG chart found to embed.'); }}>Capture Chart</button>\r\n      <PDFDownloadLink document={MyDoc} fileName={`trading-report-${new Date().toISOString().slice(0,10)}.pdf`} className=\"btn-gradient px-3 py-2 rounded text-sm\" aria-label=\"Download PDF report\">Download PDF</PDFDownloadLink>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  page: { padding: 20, backgroundColor: '#0a0a0a', color: '#ffffff' },\r\n  title: { fontSize: 20, marginBottom: 8 },\r\n  subtitle: { fontSize: 12, marginBottom: 8 },\r\n  image: { width: '100%', height: 250, marginTop: 12 },\r\n});\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;;;AAHA;;;AAKe,SAAS,UAAU,EAAE,MAAM,EAAE,aAAa,EAA6C;;IACpG,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAgB;IAEhE,eAAe;QACb,IAAI,CAAC,eAAe,OAAO;QAC3B,MAAM,KAAK,SAAS,aAAa,CAAC;QAClC,IAAI,CAAC,IAAI,OAAO;QAChB,MAAM,MAAM,GAAG,aAAa,CAAC;QAC7B,IAAI,CAAC,KAAK,OAAO;QACjB,MAAM,IAAI,IAAI,gBAAgB,iBAAiB,CAAC;QAChD,MAAM,OAAO,sCAAsC,mBAAmB;QACtE,OAAO;IACT;IAEA,MAAM,WAAW,OAAO,MAAM,CAAC,CAAC,GAAG,IAAM,IAAI,CAAC,EAAE,UAAU,IAAI,CAAC,GAAG;IAClE,MAAM,OAAO,OAAO,MAAM,CAAC,CAAA,IAAK,EAAE,OAAO,KAAK,OAAO,MAAM;IAC3D,MAAM,OAAO,OAAO,MAAM,CAAC,CAAA,IAAK,EAAE,OAAO,KAAK,QAAQ,MAAM;IAE5D,MAAM,sBACJ,6LAAC,2KAAQ;kBACP,cAAA,6LAAC,uKAAI;YAAC,MAAK;YAAK,OAAO,OAAO,IAAI;sBAChC,cAAA,6LAAC,uKAAI;;kCACH,6LAAC,uKAAI;wBAAC,OAAO,OAAO,KAAK;kCAAE;;;;;;kCAC3B,6LAAC,uKAAI;wBAAC,OAAO,OAAO,QAAQ;;4BAAE;4BAAe,OAAO,MAAM;;;;;;;kCAC1D,6LAAC,uKAAI;;4BAAC;4BAAY,SAAS,OAAO,CAAC;;;;;;;kCACnC,6LAAC,uKAAI;;4BAAC;4BAAO;4BAAK;4BAAU;;;;;;;oBAC3B,8BAAgB,6LAAC,wKAAK;wBAAC,OAAO,OAAO,KAAK;wBAAE,KAAK;;;;;;;;;;;;;;;;;;;;;;IAM1D,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAO,cAAW;gBAAwB,WAAU;gBAAyC,SAAS;oBAAc,MAAM,OAAO,MAAM;oBAAgB,IAAI,MAAM,gBAAgB;yBAAY,MAAM;gBAAiC;0BAAG;;;;;;0BACxO,6LAAC,kNAAe;gBAAC,UAAU;gBAAO,UAAU,CAAC,eAAe,EAAE,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,GAAE,IAAI,IAAI,CAAC;gBAAE,WAAU;gBAAyC,cAAW;0BAAsB;;;;;;;;;;;;AAGpM;GAtCwB;KAAA;AAwCxB,MAAM,SAAS,6MAAU,CAAC,MAAM,CAAC;IAC/B,MAAM;QAAE,SAAS;QAAI,iBAAiB;QAAW,OAAO;IAAU;IAClE,OAAO;QAAE,UAAU;QAAI,cAAc;IAAE;IACvC,UAAU;QAAE,UAAU;QAAI,cAAc;IAAE;IAC1C,OAAO;QAAE,OAAO;QAAQ,QAAQ;QAAK,WAAW;IAAG;AACrD"}}]
}