{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/Forex-Journal/src/components/AnimatedCard.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { motion, type HTMLMotionProps } from 'framer-motion';\n\ntype Props = HTMLMotionProps<'div'> & {\n  children: React.ReactNode;\n};\n\nexport default function AnimatedCard({ children, className = '', ...props }: Props) {\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 8, scale: 0.995 }}\n      whileInView={{ opacity: 1, y: 0, scale: 1 }}\n      whileHover={{ y: -4 }}\n      whileTap={{ scale: 0.995 }}\n      viewport={{ once: true, amount: 0.15 }}\n      transition={{ type: 'spring', stiffness: 260, damping: 22 }}\n      className={`card ${className}`}\n      {...props}\n    >\n      {children}\n    </motion.div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAGA;AAHA;;;AASe,SAAS,aAAa,EAAE,QAAQ,EAAE,YAAY,EAAE,EAAE,GAAG,OAAc;IAChF,qBACE,8OAAC,oMAAM,CAAC,GAAG;QACT,SAAS;YAAE,SAAS;YAAG,GAAG;YAAG,OAAO;QAAM;QAC1C,aAAa;YAAE,SAAS;YAAG,GAAG;YAAG,OAAO;QAAE;QAC1C,YAAY;YAAE,GAAG,CAAC;QAAE;QACpB,UAAU;YAAE,OAAO;QAAM;QACzB,UAAU;YAAE,MAAM;YAAM,QAAQ;QAAK;QACrC,YAAY;YAAE,MAAM;YAAU,WAAW;YAAK,SAAS;QAAG;QAC1D,WAAW,CAAC,KAAK,EAAE,WAAW;QAC7B,GAAG,KAAK;kBAER;;;;;;AAGP"}},
    {"offset": {"line": 53, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/Forex-Journal/src/app/calendar/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, useMemo } from 'react';\r\nimport DashboardHeaderV3 from '@/components/DashboardHeaderV3';\r\nimport { Toaster } from 'react-hot-toast';\r\nimport AnimatedCard from '@/components/AnimatedCard';\r\n\r\ninterface Trade {\r\n  id: string;\r\n  pair: string;\r\n  direction: string;\r\n  outcome?: string;\r\n  profitLoss?: number;\r\n  entryTime: string;\r\n}\r\n\r\nexport default function CalendarPage() {\r\n  // Header component v3 used across the app\r\n  const [mounted, setMounted] = useState(false);\r\n  const [trades, setTrades] = useState<Trade[]>([]);\r\n  const [currentMonth, setCurrentMonth] = useState(new Date());\r\n  const [selectedDate, setSelectedDate] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    setMounted(true);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!mounted) return;\r\n    \r\n    const fetchTrades = async () => {\r\n      try {\r\n        const response = await fetch('/api/trades', {\r\n          headers: {\r\n            'x-user-id': 'demo-user',\r\n          },\r\n        });\r\n\r\n        if (!response.ok) {\r\n          let errBody: any = null;\r\n          try { errBody = await response.json(); } catch (e) { errBody = await response.text(); }\r\n          console.error('Failed to fetch trades:', response.status, errBody);\r\n          setTrades([]);\r\n          return;\r\n        }\r\n\r\n        const data = await response.json();\r\n        if (!Array.isArray(data)) {\r\n          console.warn('Unexpected trades payload in calendar page', data);\r\n          setTrades([]);\r\n          return;\r\n        }\r\n\r\n        setTrades(data);\r\n      } catch (error) {\r\n        console.error('Error fetching trades:', error);\r\n      }\r\n    };\r\n\r\n    fetchTrades();\r\n  }, [mounted]);\r\n\r\n  const tradesByDate = useMemo(() => {\r\n    const grouped: { [key: string]: Trade[] } = {};\r\n    trades.forEach(trade => {\r\n      const date = new Date(trade.entryTime).toISOString().split('T')[0];\r\n      if (!grouped[date]) grouped[date] = [];\r\n      grouped[date].push(trade);\r\n    });\r\n    return grouped;\r\n  }, [trades]);\r\n\r\n  const getDaysInMonth = (date: Date) => {\r\n    return new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();\r\n  };\r\n\r\n  const getFirstDayOfMonth = (date: Date) => {\r\n    return new Date(date.getFullYear(), date.getMonth(), 1).getDay();\r\n  };\r\n\r\n  const days = Array.from({ length: getDaysInMonth(currentMonth) }, (_, i) => i + 1);\r\n  const firstDay = getFirstDayOfMonth(currentMonth);\r\n  const emptyDays = Array.from({ length: firstDay }, (_, i) => null);\r\n\r\n  const calendarDays = [...emptyDays, ...days];\r\n\r\n  const selectedDateTrades = selectedDate ? tradesByDate[selectedDate] || [] : [];\r\n\r\n  const getDayStats = (day: number) => {\r\n    const date = new Date(currentMonth.getFullYear(), currentMonth.getMonth(), day).toISOString().split('T')[0];\r\n    const dayTrades = tradesByDate[date] || [];\r\n    const pnl = dayTrades.reduce((sum, t) => sum + (t.profitLoss || 0), 0);\r\n    const wins = dayTrades.filter(t => t.outcome === 'WIN').length;\r\n    return { count: dayTrades.length, pnl, wins };\r\n  };\r\n\r\n  if (!mounted) {\r\n    return <div className=\"min-h-screen bg-white dark:bg-slate-950\" />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-white dark:bg-slate-950\">\r\n      <DashboardHeaderV3 />\r\n\r\n      <main className=\"container mx-auto px-4 py-8 max-w-6xl\">\r\n        <div className=\"mb-8\">\r\n          <h1 className=\"text-2xl font-bold gradient-text mb-2\">Trading Calendar</h1>\r\n          <p className=\"text-gray-600 dark:text-gray-400\">View your trades by day</p>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n          {/* Calendar */}\r\n          <AnimatedCard className=\"lg:col-span-2 p-6 animate-slideUp\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <h2 className=\"text-xl font-bold gradient-text\">\r\n                {currentMonth.toLocaleString('default', { month: 'long', year: 'numeric' })}\r\n              </h2>\r\n              <div className=\"flex gap-2\">\r\n                <button\r\n                  onClick={() => setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() - 1))}\r\n                  className=\"btn-compact rounded-md\"\r\n                  style={{ border: '1px solid var(--card-border)' }}\r\n                >\r\n                  ← Prev\r\n                </button>\r\n                <button\r\n                  onClick={() => setCurrentMonth(new Date())}\r\n                  className=\"btn-compact btn-primary\"\r\n                >\r\n                  Today\r\n                </button>\r\n                <button\r\n                  onClick={() => setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1))}\r\n                  className=\"btn-compact rounded-md\"\r\n                  style={{ border: '1px solid var(--card-border)' }}\r\n                >\r\n                  Next →\r\n                </button>\r\n              </div>\r\n            </div> \r\n\r\n            {/* Day Headers */}\r\n            <div className=\"grid grid-cols-7 gap-2 mb-2\">\r\n              {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map(day => (\r\n                <div key={day} className=\"text-center font-semibold text-gray-700 dark:text-gray-300 text-xs py-1\">\r\n                  {day}\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            {/* Days */}\r\n            <div className=\"calendar-grid\">\r\n              {calendarDays.map((day, idx) => {\r\n                if (day === null) {\r\n                  return <div key={`empty-${idx}`} className=\"calendar-day\" />;\r\n                }\r\n\r\n                const date = new Date(currentMonth.getFullYear(), currentMonth.getMonth(), day).toISOString().split('T')[0];\r\n                const stats = getDayStats(day);\r\n                const isSelected = selectedDate === date;\r\n\r\n                return (\r\n                  <button\r\n                    key={day}\r\n                    onClick={() => setSelectedDate(isSelected ? null : date)}\r\n                    className={`calendar-day rounded-lg border-2 transition-colors font-semibold animate-fadeIn ${\r\n                      isSelected\r\n                        ? 'bg-purple-600 border-purple-600 text-white dark:bg-purple-700 dark:border-purple-700'\r\n                        : stats.count > 0\r\n                        ? stats.pnl >= 0\r\n                          ? 'bg-green-100 border-green-300 dark:bg-green-900/30 dark:border-green-700 text-green-900 dark:text-green-100'\r\n                          : 'bg-red-100 border-red-300 dark:bg-red-900/30 dark:border-red-700 text-red-900 dark:text-red-100'\r\n                        : 'bg-gray-100 border-gray-300 dark:bg-slate-700 dark:border-slate-600 text-gray-600 dark:text-gray-400'\r\n                    }`}\r\n                  >\r\n                    <div className=\"w-full flex items-start justify-between\">\r\n                      <div className=\"text-sm font-semibold\">{day}</div>\r\n                      {stats.count > 0 && (\r\n                        <div className=\"text-[11px]\">{stats.count}T</div>\r\n                      )}\r\n                    </div>\r\n                  </button>\r\n                );\r\n              })}\r\n            </div>\r\n\r\n            {/* Legend */}\r\n            <div className=\"mt-6 flex flex-wrap gap-4 calendar-legend\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <div className=\"w-4 h-4 bg-green-100 dark:bg-green-900/30 rounded border-2 border-green-300 dark:border-green-700\" />\r\n                <span className=\"text-gray-700 dark:text-gray-300\">Winning Day</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <div className=\"w-4 h-4 bg-red-100 dark:bg-red-900/30 rounded border-2 border-red-300 dark:border-red-700\" />\r\n                <span className=\"text-gray-700 dark:text-gray-300\">Losing Day</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <div className=\"w-4 h-4 bg-gray-100 dark:bg-slate-700 rounded border-2 border-gray-300 dark:border-slate-600\" />\r\n                <span className=\"text-gray-700 dark:text-gray-300\">No Trades</span>\r\n              </div>\r\n            </div>\r\n          </AnimatedCard>\r\n\r\n          {/* Selected Date Trades */}\r\n          <AnimatedCard className=\"p-6 animate-slideUp\">\r\n            <h2 className=\"text-lg font-bold gradient-text mb-4\">\r\n              {selectedDate ? new Date(selectedDate + 'T00:00:00').toLocaleDateString() : 'Select a date'}\r\n            </h2>\r\n\r\n            {selectedDateTrades.length > 0 ? (\r\n              <div className=\"space-y-3\">\r\n                {selectedDateTrades.map(trade => (\r\n                  <div key={trade.id} className=\"card p-3\">\r\n                    <div className=\"flex items-center justify-between mb-1\">\r\n                      <span className=\"font-semibold text-gray-900 dark:text-white text-sm\">{trade.pair}</span>\r\n                      <span className={`text-xs font-semibold px-2 py-1 rounded ${\r\n                        trade.outcome === 'WIN'\r\n                          ? 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400'\r\n                          : 'bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400'\r\n                      }`}>\r\n                        {trade.outcome || 'Open'}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex items-center justify-between text-xs\">\r\n                      <span className=\"text-gray-600 dark:text-gray-400\">{trade.direction}</span>\r\n                      <span className={trade.profitLoss && trade.profitLoss >= 0 ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'}>\r\n                        {trade.profitLoss !== undefined ? `${trade.profitLoss >= 0 ? '+' : ''}${trade.profitLoss.toFixed(2)}` : 'N/A'}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                {selectedDate ? 'No trades on this date' : 'Select a date to view trades'}\r\n              </p>\r\n            )}\r\n          </AnimatedCard>\r\n        </div>\r\n      </main>\r\n\r\n      <Toaster position=\"bottom-right\" />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}