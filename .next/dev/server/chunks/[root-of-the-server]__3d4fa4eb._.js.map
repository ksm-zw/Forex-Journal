{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/Forex-Journal/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\n\n// Safe Prisma provider: only instantiate Prisma when DATABASE_URL looks valid for supported providers.\n// This prevents dev servers and serverless hosts without DB configured from crashing.\nlet prisma: PrismaClient | null = null;\n\ntry {\n  const url = process.env.DATABASE_URL || '';\n  const normalized = url.trim();\n  const isSqlite = normalized.startsWith('file:');\n  const isPg = normalized.startsWith('postgres') || normalized.startsWith('postgresql:');\n\n  if (normalized && (isSqlite || isPg)) {\n    prisma = new PrismaClient();\n  } else {\n    // No valid DATABASE_URL set; leave prisma null so callers can fallback\n    console.warn('Prisma disabled: DATABASE_URL not set to sqlite or postgres. Falling back to demo/resilient behavior.');\n  }\n} catch (err) {\n  console.warn('Failed to initialize Prisma client:', err);\n  prisma = null;\n}\n\nexport { prisma };\n"],"names":[],"mappings":";;;;AAAA;;AAEA,uGAAuG;AACvG,sFAAsF;AACtF,IAAI,SAA8B;AAElC,IAAI;IACF,MAAM,MAAM,QAAQ,GAAG,CAAC,YAAY,IAAI;IACxC,MAAM,aAAa,IAAI,IAAI;IAC3B,MAAM,WAAW,WAAW,UAAU,CAAC;IACvC,MAAM,OAAO,WAAW,UAAU,CAAC,eAAe,WAAW,UAAU,CAAC;IAExE,IAAI,cAAc,CAAC,YAAY,IAAI,GAAG;QACpC,SAAS,IAAI,sMAAY;IAC3B,OAAO;QACL,uEAAuE;QACvE,QAAQ,IAAI,CAAC;IACf;AACF,EAAE,OAAO,KAAK;IACZ,QAAQ,IAAI,CAAC,uCAAuC;IACpD,SAAS;AACX"}},
    {"offset": {"line": 75, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/Forex-Journal/src/app/api/debug/user/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport { prisma } from '@/lib/prisma';\n\nexport async function GET(request: NextRequest) {\n  const userId = request.headers.get('x-user-id') || 'demo-user';\n  \n  if (!prisma) {\n    return NextResponse.json({ error: 'Database unavailable' }, { status: 503 });\n  }\n\n  // Get all users to help debug\n  const allUsers = await prisma.user.findMany();\n  \n  // Try to find with email\n  const byEmail = await prisma.user.findUnique({\n    where: { email: 'demo@forex-research.com' },\n    include: { _count: { select: { strategies: true } } },\n  });\n\n  return NextResponse.json({\n    headerUserId: userId,\n    allUsers: allUsers.map((u) => ({ id: u.id, email: u.email })),\n    demoUserByEmail: byEmail,\n  });\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,IAAI,OAAoB;IAC5C,MAAM,SAAS,QAAQ,OAAO,CAAC,GAAG,CAAC,gBAAgB;IAEnD,IAAI,CAAC,gIAAM,EAAE;QACX,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAuB,GAAG;YAAE,QAAQ;QAAI;IAC5E;IAEA,8BAA8B;IAC9B,MAAM,WAAW,MAAM,gIAAM,CAAC,IAAI,CAAC,QAAQ;IAE3C,yBAAyB;IACzB,MAAM,UAAU,MAAM,gIAAM,CAAC,IAAI,CAAC,UAAU,CAAC;QAC3C,OAAO;YAAE,OAAO;QAA0B;QAC1C,SAAS;YAAE,QAAQ;gBAAE,QAAQ;oBAAE,YAAY;gBAAK;YAAE;QAAE;IACtD;IAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;QACvB,cAAc;QACd,UAAU,SAAS,GAAG,CAAC,CAAC,IAAM,CAAC;gBAAE,IAAI,EAAE,EAAE;gBAAE,OAAO,EAAE,KAAK;YAAC,CAAC;QAC3D,iBAAiB;IACnB;AACF"}}]
}