module.exports=[71297,a=>{"use strict";var b=a.i(87924),c=a.i(46271);function d({children:a,className:d="",...e}){return(0,b.jsx)(c.motion.div,{initial:{opacity:0,y:8,scale:.995},whileInView:{opacity:1,y:0,scale:1},whileHover:{y:-4},whileTap:{scale:.995},viewport:{once:!0,amount:.15},transition:{type:"spring",stiffness:260,damping:22},className:`card ${d}`,...e,children:a})}a.s(["default",()=>d])},73497,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(76597),e=a.i(6704),f=a.i(71297);function g(){let[a,g]=(0,c.useState)(!1),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(new Date),[l,m]=(0,c.useState)(null);(0,c.useEffect)(()=>{g(!0)},[]),(0,c.useEffect)(()=>{a&&(async()=>{try{let a=await fetch("/api/trades",{headers:{"x-user-id":"demo-user"}});if(!a.ok){let b=null;try{b=await a.json()}catch(c){b=await a.text()}console.error("Failed to fetch trades:",a.status,b),i([]);return}let b=await a.json();if(!Array.isArray(b)){console.warn("Unexpected trades payload in calendar page",b),i([]);return}i(b)}catch(a){console.error("Error fetching trades:",a)}})()},[a]);let n=(0,c.useMemo)(()=>{let a={};return h.forEach(b=>{let c=new Date(b.entryTime).toISOString().split("T")[0];a[c]||(a[c]=[]),a[c].push(b)}),a},[h]),o=Array.from({length:new Date(j.getFullYear(),j.getMonth()+1,0).getDate()},(a,b)=>b+1),p=[...Array.from({length:new Date(j.getFullYear(),j.getMonth(),1).getDay()},(a,b)=>null),...o],q=l&&n[l]||[];return a?(0,b.jsxs)("div",{className:"min-h-screen bg-white dark:bg-slate-950",children:[(0,b.jsx)(d.default,{}),(0,b.jsxs)("main",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Trading Calendar"}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"View your trades by day"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,b.jsxs)(f.default,{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-4 border border-gray-200 dark:border-slate-700",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:j.toLocaleString("default",{month:"long",year:"numeric"})}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>k(new Date(j.getFullYear(),j.getMonth()-1)),className:"btn-compact bg-gray-200 dark:bg-slate-700 hover:bg-gray-300 dark:hover:bg-slate-600 transition-colors rounded-md",children:"← Prev"}),(0,b.jsx)("button",{onClick:()=>k(new Date),className:"btn-compact bg-blue-600 hover:bg-blue-700 text-white transition-colors rounded-md",children:"Today"}),(0,b.jsx)("button",{onClick:()=>k(new Date(j.getFullYear(),j.getMonth()+1)),className:"btn-compact bg-gray-200 dark:bg-slate-700 hover:bg-gray-300 dark:hover:bg-slate-600 transition-colors rounded-md",children:"Next →"})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-7 gap-2 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(a=>(0,b.jsx)("div",{className:"text-center font-semibold text-gray-700 dark:text-gray-300 text-xs py-1",children:a},a))}),(0,b.jsx)("div",{className:"calendar-grid",children:p.map((a,c)=>{let d,e,f;if(null===a)return(0,b.jsx)("div",{className:"calendar-day"},`empty-${c}`);let g=new Date(j.getFullYear(),j.getMonth(),a).toISOString().split("T")[0],h=(e=(d=n[new Date(j.getFullYear(),j.getMonth(),a).toISOString().split("T")[0]]||[]).reduce((a,b)=>a+(b.profitLoss||0),0),f=d.filter(a=>"WIN"===a.outcome).length,{count:d.length,pnl:e,wins:f}),i=l===g;return(0,b.jsx)("button",{onClick:()=>m(i?null:g),className:`calendar-day rounded-lg border-2 transition-colors font-semibold ${i?"bg-blue-600 border-blue-600 text-white dark:bg-blue-700 dark:border-blue-700":h.count>0?h.pnl>=0?"bg-green-100 border-green-300 dark:bg-green-900/30 dark:border-green-700 text-green-900 dark:text-green-100":"bg-red-100 border-red-300 dark:bg-red-900/30 dark:border-red-700 text-red-900 dark:text-red-100":"bg-gray-100 border-gray-300 dark:bg-slate-700 dark:border-slate-600 text-gray-600 dark:text-gray-400"}`,children:(0,b.jsxs)("div",{className:"w-full flex items-start justify-between",children:[(0,b.jsx)("div",{className:"text-sm font-semibold",children:a}),h.count>0&&(0,b.jsxs)("div",{className:"text-[11px]",children:[h.count,"T"]})]})},a)})}),(0,b.jsxs)("div",{className:"mt-6 flex flex-wrap gap-4 calendar-legend",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-4 h-4 bg-green-100 dark:bg-green-900/30 rounded border-2 border-green-300 dark:border-green-700"}),(0,b.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"Winning Day"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-4 h-4 bg-red-100 dark:bg-red-900/30 rounded border-2 border-red-300 dark:border-red-700"}),(0,b.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"Losing Day"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-4 h-4 bg-gray-100 dark:bg-slate-700 rounded border-2 border-gray-300 dark:border-slate-600"}),(0,b.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"No Trades"})]})]})]}),(0,b.jsxs)(f.default,{className:"bg-white dark:bg-slate-800 p-4 border border-gray-200 dark:border-slate-700 h-fit",children:[(0,b.jsx)("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:l?new Date(l+"T00:00:00").toLocaleDateString():"Select a date"}),q.length>0?(0,b.jsx)("div",{className:"space-y-3",children:q.map(a=>(0,b.jsxs)("div",{className:"bg-gray-50 dark:bg-slate-700 p-3 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,b.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:a.pair}),(0,b.jsx)("span",{className:`text-xs font-semibold px-2 py-1 rounded ${"WIN"===a.outcome?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:a.outcome||"Open"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,b.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:a.direction}),(0,b.jsx)("span",{className:a.profitLoss&&a.profitLoss>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",children:void 0!==a.profitLoss?`${a.profitLoss>=0?"+":""}${a.profitLoss.toFixed(2)}`:"N/A"})]})]},a.id))}):(0,b.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:l?"No trades on this date":"Select a date to view trades"})]})]})]}),(0,b.jsx)(e.Toaster,{position:"bottom-right"})]}):(0,b.jsx)("div",{className:"min-h-screen bg-white dark:bg-slate-950"})}a.s(["default",()=>g])}];

//# sourceMappingURL=src_25fb1204._.js.map