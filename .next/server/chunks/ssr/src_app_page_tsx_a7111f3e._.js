module.exports=[40777,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(46271);function e({title:a,value:c,subtitle:e,icon:f,color:g="purple",trend:h}){let i={purple:{bg:"var(--purple-darker)",accent:"var(--purple-light)"},green:{bg:"rgba(16, 185, 129, 0.1)",accent:"var(--win-color)"},red:{bg:"rgba(239, 68, 68, 0.1)",accent:"var(--loss-color)"},blue:{bg:"rgba(59, 130, 246, 0.1)",accent:"var(--blue-accent)"}}[g];return(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"12px",padding:"24px",transition:"all 0.3s ease",cursor:"pointer"},onMouseEnter:a=>{a.currentTarget.style.borderColor=i.accent,a.currentTarget.style.boxShadow=`0 8px 32px ${i.accent}33`,a.currentTarget.style.transform="translateY(-4px)"},onMouseLeave:a=>{a.currentTarget.style.borderColor="var(--card-border)",a.currentTarget.style.boxShadow="none",a.currentTarget.style.transform="translateY(0)"},children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[(0,b.jsxs)("div",{style:{flex:1},children:[(0,b.jsx)("p",{style:{fontSize:"13px",color:"var(--neutral-color)",margin:"0 0 8px 0",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:"600"},children:a}),(0,b.jsx)("h3",{style:{fontSize:"32px",fontWeight:"bold",margin:"0 0 4px 0",background:"purple"===g?"linear-gradient(135deg, var(--purple-light) 0%, var(--cyan-accent) 100%)":"inherit",WebkitBackgroundClip:"purple"===g?"text":"unset",WebkitTextFillColor:"purple"===g?"transparent":"inherit",backgroundClip:"purple"===g?"text":"unset",color:"purple"===g?"inherit":i.accent},children:c}),e&&(0,b.jsx)("p",{style:{fontSize:"12px",color:"var(--neutral-color)",margin:"0"},children:e})]}),f&&(0,b.jsx)("div",{style:{width:"48px",height:"48px",borderRadius:"8px",background:i.bg,display:"flex",alignItems:"center",justifyContent:"center",color:i.accent},children:f})]}),h&&(0,b.jsxs)("div",{style:{marginTop:"12px",display:"flex",alignItems:"center",gap:"4px",fontSize:"12px",color:"up"===h.direction?"var(--win-color)":"var(--loss-color)"},children:[(0,b.jsx)("span",{children:"up"===h.direction?"↑":"↓"}),(0,b.jsxs)("span",{children:[Math.abs(h.value),"% from last month"]})]})]})}var f=a.i(27348),g=a.i(554),h=a.i(31760),i=["axis"],j=(0,c.forwardRef)((a,b)=>c.createElement(h.CartesianChart,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:i,tooltipPayloadSearcher:g.arrayTooltipSearcher,categoricalChartProps:a,ref:b})),k=a.i(85811),l=a.i(18155),m=a.i(23665),n=a.i(58042),o=a.i(94222),p=a.i(54419),q=a.i(59854),r=a.i(48662),s=a.i(64321),t=a.i(27165),u=a.i(67149),v=a.i(6704);function w(){let[a,g]=(0,c.useState)([]),[h,i]=(0,c.useState)(!1),[w,x]=(0,c.useState)({totalPnL:0,winRate:0,totalTrades:0,closedTrades:0,avgWin:0,avgLoss:0,wins:0,losses:0,bestDay:0,worstDay:0}),y=async()=>{try{i(!0);let a=await fetch("/api/trades",{headers:{"x-user-id":"demo-user"}});if(!a.ok){let b=null;try{b=await a.json()}catch(c){b=await a.text()}console.error("Failed to fetch trades:",a.status,b),v.default.error("Failed to fetch trades"),g([]),x({totalPnL:0,winRate:0,totalTrades:0,closedTrades:0,avgWin:0,avgLoss:0,wins:0,losses:0,bestDay:0,worstDay:0});return}let b=await a.json();if(!Array.isArray(b)){console.warn("Unexpected trades payload, expected array but got:",b),v.default.error("Unexpected trades format"),g([]),x({totalPnL:0,winRate:0,totalTrades:0,closedTrades:0,avgWin:0,avgLoss:0,wins:0,losses:0,bestDay:0,worstDay:0});return}g(b);let c=b.filter(a=>a.outcome&&"OPEN"!==a.outcome),d=c.filter(a=>"WIN"===a.outcome).length,e=c.filter(a=>"LOSS"===a.outcome).length,f=b.reduce((a,b)=>a+(b.profitLoss||0),0),h=d>0?b.filter(a=>"WIN"===a.outcome&&a.profitLoss).reduce((a,b)=>a+b.profitLoss,0)/d:0,j=e>0?Math.abs(b.filter(a=>"LOSS"===a.outcome&&a.profitLoss).reduce((a,b)=>a+b.profitLoss,0)/e):0;x({totalPnL:parseFloat(f.toFixed(2)),winRate:c.length>0?parseFloat((d/c.length*100).toFixed(2)):0,totalTrades:b.length,closedTrades:c.length,avgWin:parseFloat(h.toFixed(2)),avgLoss:parseFloat(j.toFixed(2)),wins:d,losses:e,bestDay:f,worstDay:-f})}catch(a){console.error("Error fetching trades:",a),v.default.error("Failed to fetch trades")}finally{i(!1)}};(0,c.useEffect)(()=>{y()},[]);let z=a.sort((a,b)=>new Date(a.entryTime).getTime()-new Date(b.entryTime).getTime()).reduce((a,b,c)=>{let d=a.length>0?a[a.length-1].equity+(b.profitLoss||0):b.profitLoss||0;return[...a,{name:`Trade ${c+1}`,equity:parseFloat(d.toFixed(2)),date:new Date(b.entryTime).toLocaleDateString()}]},[]),A=[{name:"Wins",value:w.wins,color:"var(--win-color)"},{name:"Losses",value:w.losses,color:"var(--loss-color)"}],B=a.reduce((a,b)=>{let c=a.find(a=>a.pair===b.pair);return c?c.pnl+=b.profitLoss||0:a.push({pair:b.pair,pnl:b.profitLoss||0}),a},[]).sort((a,b)=>b.pnl-a.pnl).slice(0,5);return(0,b.jsxs)("div",{style:{width:"100%"},children:[(0,b.jsx)(v.Toaster,{position:"bottom-right"}),(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},style:{marginBottom:"32px"},children:[(0,b.jsx)("h2",{style:{fontSize:"28px",fontWeight:"bold",margin:"0 0 8px 0",color:"var(--foreground)"},children:"Trading Dashboard"}),(0,b.jsx)("p",{style:{fontSize:"14px",color:"var(--neutral-color)",margin:0},children:"Your complete trading journal and performance analytics"})]}),(0,b.jsx)("div",{style:{marginBottom:"24px"},children:(0,b.jsxs)("button",{onClick:y,disabled:h,className:"btn-primary",style:{display:"inline-flex",alignItems:"center",gap:"8px",opacity:h?.6:1},children:[(0,b.jsx)(f.FiRefreshCw,{size:16,style:{animation:h?"spin 1s linear infinite":"none"}}),h?"Loading...":"Refresh Data"]})}),(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px",marginBottom:"32px"},children:[(0,b.jsx)(e,{title:"Total P&L",value:`$${w.totalPnL}`,color:w.totalPnL>=0?"green":"red",subtitle:`${w.closedTrades} closed trades`,icon:(0,b.jsx)(f.FiDollarSign,{size:24}),trend:{value:12.5,direction:w.totalPnL>=0?"up":"down"}}),(0,b.jsx)(e,{title:"Win Rate",value:`${w.winRate}%`,color:"blue",subtitle:`${w.wins}W / ${w.losses}L`,icon:(0,b.jsx)(f.FiTrendingUp,{size:24})}),(0,b.jsx)(e,{title:"Avg Win / Loss",value:`$${w.avgWin} / $${w.avgLoss}`,color:"purple",subtitle:"Risk-Reward Ratio",icon:(0,b.jsx)(f.FiTarget,{size:24})}),(0,b.jsx)(e,{title:"Total Trades",value:w.totalTrades,color:"blue",subtitle:`${w.closedTrades} closed`})]}),(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"2fr 360px",gap:"24px",marginBottom:"32px"},children:[(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"var(--radius-lg)",padding:"20px",minHeight:"360px"},children:[(0,b.jsx)("h3",{style:{fontSize:"16px",fontWeight:"700",marginBottom:"16px",color:"var(--foreground)"},children:"Equity Curve"}),z.length>0?(0,b.jsx)(r.ResponsiveContainer,{width:"100%",height:320,children:(0,b.jsxs)(j,{data:z,children:[(0,b.jsx)("defs",{children:(0,b.jsxs)("linearGradient",{id:"colorEquity",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,b.jsx)("stop",{offset:"5%",stopColor:"var(--purple-base)",stopOpacity:.9}),(0,b.jsx)("stop",{offset:"95%",stopColor:"var(--purple-base)",stopOpacity:.08})]})}),(0,b.jsx)(p.CartesianGrid,{strokeDasharray:"3 3",stroke:"var(--card-border)"}),(0,b.jsx)(n.XAxis,{dataKey:"name",stroke:"var(--neutral-color)"}),(0,b.jsx)(o.YAxis,{stroke:"var(--neutral-color)"}),(0,b.jsx)(q.Tooltip,{contentStyle:{backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"8px"}}),(0,b.jsx)(k.Area,{type:"monotone",dataKey:"equity",stroke:"var(--purple-light)",fillOpacity:1,fill:"url(#colorEquity)"})]})}):(0,b.jsx)("div",{style:{height:"300px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--neutral-color)"},children:"No trades to display"})]}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"18px"},children:[(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"var(--radius-md)",padding:"16px",minHeight:"180px"},children:[(0,b.jsx)("h3",{style:{fontSize:"14px",fontWeight:"700",marginBottom:"12px",color:"var(--foreground)"},children:"Win Distribution"}),A.some(a=>a.value>0)?(0,b.jsx)(r.ResponsiveContainer,{width:"100%",height:140,children:(0,b.jsx)(s.PieChart,{children:(0,b.jsx)(t.Pie,{data:A,cx:"50%",cy:"50%",labelLine:!1,label:a=>`${a.name}: ${a.value}`,outerRadius:60,fill:"#8884d8",dataKey:"value",children:A.map((a,c)=>(0,b.jsx)(u.Cell,{fill:a.color},`cell-${c}`))})})}):(0,b.jsx)("div",{style:{height:"140px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--neutral-color)"},children:"No closed trades yet"})]}),(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"var(--radius-md)",padding:"16px",minHeight:"200px"},children:[(0,b.jsx)("h3",{style:{fontSize:"14px",fontWeight:"700",marginBottom:"12px",color:"var(--foreground)"},children:"Top Pairs"}),B.length>0?(0,b.jsx)(r.ResponsiveContainer,{width:"100%",height:160,children:(0,b.jsxs)(l.BarChart,{data:B,children:[(0,b.jsx)(p.CartesianGrid,{strokeDasharray:"3 3",stroke:"var(--card-border)"}),(0,b.jsx)(n.XAxis,{dataKey:"pair",stroke:"var(--neutral-color)"}),(0,b.jsx)(o.YAxis,{stroke:"var(--neutral-color)"}),(0,b.jsx)(m.Bar,{dataKey:"pnl",fill:"var(--purple-light)",radius:[6,6,0,0]})]})}):(0,b.jsx)("div",{style:{height:"160px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--neutral-color)"},children:"No trade data yet"})]})]})]}),(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"32px"},children:[(0,b.jsxs)("div",{style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"12px",padding:"16px",textAlign:"center"},children:[(0,b.jsx)("p",{style:{color:"var(--neutral-color)",margin:"0 0 8px 0",fontSize:"12px"},children:"Consecutive Wins"}),(0,b.jsx)("p",{style:{fontSize:"24px",fontWeight:"bold",margin:0,color:"var(--win-color)"},children:"0"})]}),(0,b.jsxs)("div",{style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"12px",padding:"16px",textAlign:"center"},children:[(0,b.jsx)("p",{style:{color:"var(--neutral-color)",margin:"0 0 8px 0",fontSize:"12px"},children:"Best Day"}),(0,b.jsxs)("p",{style:{fontSize:"24px",fontWeight:"bold",margin:0,color:"var(--win-color)"},children:["$",w.bestDay]})]}),(0,b.jsxs)("div",{style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"12px",padding:"16px",textAlign:"center"},children:[(0,b.jsx)("p",{style:{color:"var(--neutral-color)",margin:"0 0 8px 0",fontSize:"12px"},children:"Worst Day"}),(0,b.jsxs)("p",{style:{fontSize:"24px",fontWeight:"bold",margin:0,color:"var(--loss-color)"},children:["$",w.worstDay]})]})]})]})}a.s(["default",()=>w],40777)}];

//# sourceMappingURL=src_app_page_tsx_a7111f3e._.js.map