module.exports=[87864,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(76597),e=a.i(46271),f=a.i(57431),g=a.i(77924),h=a.i(58042),i=a.i(94222),j=a.i(54419),k=a.i(59854),l=a.i(2274),m=a.i(48662);function n(){let[a,n]=(0,c.useState)([]),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(2),[s,t]=(0,c.useState)(20),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)([]);async function A(){try{let a=await fetch("/api/strategies",{headers:{"x-user-id":"demo@forex-research.com"}}),b=await a.json();b.success&&b.strategies&&(n(b.strategies),b.strategies.length>0&&p(b.strategies[0].id))}catch(a){console.error("Failed to fetch strategies:",a)}}async function B(){if(o){x(!0);try{let a=Array.from({length:s},()=>({entryPrice:100+20*Math.random()-10,exitPrice:100+20*Math.random()-10,volume:.7>Math.random()?.1:.05,direction:.5>Math.random()?"LONG":"SHORT",stopLoss:98,takeProfit:103})),b=0,c=0,d=0,e=0,f=1e4,g=1e4,h=0,i=[{trade:0,equity:f}];for(let j=0;j<a.length;j++){let k=a[j];if(!k.exitPrice)continue;let l="LONG"===k.direction?k.exitPrice-k.entryPrice:k.entryPrice-k.exitPrice,m=100*l*k.volume*(q/100);m>0?(b++,d+=m):(c++,e+=Math.abs(m)),f+=m;let n=((g=Math.max(g,f))-f)/g*100;h=Math.max(h,n),i.push({trade:j+1,equity:Math.round(100*f)/100})}let j=b+c,k=j>0?b/j*100:0,l=e>0?d/e:0,m=j>0?(d/b*b-e/c*c)/j*100:0,n=d>0&&e>0?d/e:0,o={totalTrades:j,wins:b,losses:c,winRate:k,totalProfit:Math.round(100*d)/100,profitFactor:Math.round(100*l)/100,expectancy:Math.round(100*m)/100,maxDrawdown:Math.round(100*h)/100,riskRewardRatio:Math.round(100*n)/100};v(o),z(i)}catch(a){console.error("Backtest failed:",a)}finally{x(!1)}}}(0,c.useEffect)(()=>{A()},[]);let C=u?[{label:"Win Rate",value:`${u.winRate.toFixed(1)}%`,color:"text-green-400"},{label:"Total Trades",value:u.totalTrades,color:"text-blue-400"},{label:"Wins / Losses",value:`${u.wins} / ${u.losses}`,color:"text-purple-400"},{label:"Profit Factor",value:u.profitFactor.toFixed(2),color:"text-yellow-400"},{label:"Total Profit",value:`$${u.totalProfit}`,color:"text-green-500"},{label:"Max Drawdown",value:`${u.maxDrawdown.toFixed(2)}%`,color:"text-red-400"},{label:"Expectancy",value:`$${u.expectancy}`,color:"text-cyan-400"},{label:"Risk/Reward",value:u.riskRewardRatio.toFixed(2),color:"text-indigo-400"}]:[];return(0,b.jsxs)("div",{className:"min-h-screen bg-[#0f0e1d] text-white",children:[(0,b.jsx)(d.default,{}),(0,b.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,b.jsxs)(e.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Strategy Backtest Simulator"}),(0,b.jsx)("p",{className:"text-gray-400",children:"Test strategy performance with historical data simulation"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,b.jsxs)(e.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"bg-gradient-to-br from-gray-900 to-gray-800/50 rounded-xl border border-gray-700 p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-bold mb-6",children:"Backtest Settings"}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Strategy"}),(0,b.jsx)("select",{value:o,onChange:a=>p(a.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:border-purple-500 focus:outline-none",children:a.map(a=>(0,b.jsx)("option",{value:a.id,children:a.strategy_name},a.id))})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold mb-2",children:["Risk per Trade: ",(0,b.jsxs)("span",{className:"text-purple-400",children:[q,"%"]})]}),(0,b.jsx)("input",{type:"range",min:"0.5",max:"5",step:"0.5",value:q,onChange:a=>r(parseFloat(a.target.value)),className:"w-full cursor-pointer accent-purple-500"})]}),(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold mb-2",children:["Number of Trades: ",(0,b.jsx)("span",{className:"text-purple-400",children:s})]}),(0,b.jsx)("input",{type:"range",min:"10",max:"100",step:"10",value:s,onChange:a=>t(parseInt(a.target.value)),className:"w-full cursor-pointer accent-purple-500"})]}),(0,b.jsx)(e.motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:B,disabled:w||!o,className:"w-full btn-primary disabled:opacity-50 hover:shadow-lg hover:shadow-purple-500/50 transition-all text-center",children:w?"Running Backtest...":"Run Backtest"})]}),(0,b.jsxs)("div",{className:"lg:col-span-3 space-y-6",children:[u&&(0,b.jsxs)(e.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-lg font-bold",children:"Results"}),(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:C.map((a,c)=>(0,b.jsxs)(e.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.05*c},className:"bg-gradient-to-br from-gray-900 to-gray-800/50 rounded-lg border border-gray-700 p-4",children:[(0,b.jsx)("p",{className:"text-xs text-gray-400 font-semibold",children:a.label}),(0,b.jsx)("p",{className:`text-xl font-bold mt-1 ${a.color}`,children:a.value})]},a.label))})]}),u&&y.length>0&&(0,b.jsxs)(e.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-gray-900 to-gray-800/50 rounded-xl border border-gray-700 p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Equity Curve"}),(0,b.jsx)(m.ResponsiveContainer,{width:"100%",height:300,children:(0,b.jsxs)(f.LineChart,{data:y,children:[(0,b.jsx)(j.CartesianGrid,{strokeDasharray:"3 3",stroke:"#374151"}),(0,b.jsx)(h.XAxis,{dataKey:"trade",stroke:"#6b7280"}),(0,b.jsx)(i.YAxis,{stroke:"#6b7280"}),(0,b.jsx)(k.Tooltip,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px"},labelStyle:{color:"#f3f4f6"}}),(0,b.jsx)(l.Legend,{}),(0,b.jsx)(g.Line,{type:"monotone",dataKey:"equity",stroke:"#a78bfa",dot:!1,isAnimationActive:!1,name:"Account Equity"})]})})]}),u&&(0,b.jsxs)(e.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800/50 rounded-lg border border-gray-700 p-4",children:[(0,b.jsx)("p",{className:"text-xs text-gray-400 font-semibold",children:"Consecutive Wins"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-green-400 mt-1",children:Math.ceil(u.wins*(u.winRate/100))})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800/50 rounded-lg border border-gray-700 p-4",children:[(0,b.jsx)("p",{className:"text-xs text-gray-400 font-semibold",children:"Avg Win/Loss Ratio"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-blue-400 mt-1",children:u.profitFactor.toFixed(2)})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800/50 rounded-lg border border-gray-700 p-4",children:[(0,b.jsx)("p",{className:"text-xs text-gray-400 font-semibold",children:"Return %"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-purple-400 mt-1",children:[(u.totalProfit/1e4*100).toFixed(1),"%"]})]})]}),!u&&(0,b.jsxs)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-gradient-to-br from-gray-900 to-gray-800/50 rounded-xl border border-gray-700 p-12 text-center",children:[(0,b.jsx)("div",{className:"text-6xl mb-4",children:"ðŸ“ˆ"}),(0,b.jsx)("p",{className:"text-gray-400",children:'Configure settings and click "Run Backtest" to see results'})]})]})]})]})]})}a.s(["default",()=>n])}];

//# sourceMappingURL=src_app_backtest_page_tsx_d9c2b94b._.js.map